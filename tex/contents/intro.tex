\chapter{Introduction}\label{intro}




\section{Water Supply Systems}\label{intro:s:water-supply-systems}

The water supply systems that are prevalent in modern society play a very important role in daily life, distributing water throughout the country from water reservoirs or water treatment plants to the citizen's houses and industries. These \gls{wss} can be quite complex and difficult to manage without proper processes that ensure the efficient operation of such networks including its environmental and economical sustainability. For this reason nowadays, the use of specialized software to aid operators or even automatically control the operation of these \gls{wss} is of uttermost importance. It must be highlighted that water has been a staple of all major human civilizations throughout History, from ancient roman aqueducts to the current era.

Moving large quantities of water through large \gls{wss} requires the use of large quantities of mechanical work, which in turn requires high levels of electric energy. With the ever-growing political, economic and environmental pressure to improve and optimize the use of energy, and with the current geopolitical issues, the access to energy is getting more expensive and regulated. This means that the need for the optimization of pumping operations to reduce costs and, potentially reduce the energy use as well, is growing within \gls{wu}.

\section{Existing Decision Support System}\label{intro:s:existing-decision-support-system}

In order to the \gls{wu}'s optimally operate their water pumps, a \gls{dss} is used by the \gls{wu}'s pump operators and/or by automatic \gls{scada} systems. Generally, this \gls{dss} is a web platform designed to suggest \textit{which} pumps to operate, \textit{when} to operate, for \textit{how} long to operate and in some cases what \textit{speed} their \gls{vsd}'s should operate, as shown in \Cref{fig:sanepar-example-01}
\input{tex/contents/fig/sanepar-example-01.tex}
The existing software’s architecture can be summarized as a “Monolithic Modular” software architecture \parencite{newman2019monolith}. This architecture is composed of a set of \gls{vps}, one for each Client, where a set of Docker containers enclose all the services needed for running the software for that Client. These services are also configured and developed separately, each in a different code repository. This fact results in an unsurmountable amount of \textit{code drift} between the same services of the different clients. \textit{Code drift} happens when, despite being based on the same code, the codebases for each Client follow different paths during software development. When there is a need to implement a new feature or fix a bug common to both codebases, these differences increase the amount of work. Apparently, this structure is not even remotely manageable for any software development team. On \Cref{methodology:ss:current-architecture}, a complete analysis of this architecture is provided and explained in detail.
\footnote{https://scubic.tech\label{foot:scubic}}

\section{Objectives}\label{intro:s:objectives}

The main goal of this work is to make the migration from the old software architecture of the \gls{dss} to a more efficient, improved software, considering the requirements from the \textit{stakeholders} while also improving the cost-performance ratio of the software without compromising the software's functionality.
This new architecture improves the performance, reliability, resilience, security, scalability and observability in comparison to the old \gls{dss} Architecture. The new software architecture brings improvements not just for the software itself but also for the development team, allowing them to improve and maintain the software easier and faster than ever before. By reducing the amount of work and time the software development team spends on each maintenance action or new functionality, it reduces cost to the software company as well. Infrastructure costs are also an important aspect of this new architecture, where the adoption of more modular and independent services means a more optimal use of compute resources, resulting in lowering such costs. This new architecture also improves the Observability of the entire system, allowing for quicker failure detection and to anticipate possible future problems with the system.

As such, the objectives can be summarized as three goals: Enable scalability of the software (through multi-tenancy), improve DevOps' \gls{kpi} and improve the Observability of the systems.


\section{Structure of the Document}\label{intro:s:structure-of-the-document}

This document is composed by a total of X chapters.

In \Cref{intro}, the chapter presents the overall theme of this body of work. Firstly, some context is given about the overall theme of this body of work and the motivation behind it. Then, the objectives for dissertation are presented to the reader. Finally, at the end of the chapter, some information regarding the content of each chapter is presented.

In \Cref{state-of-the-art}, a bibliographical analysis is presented, divided into three parts. Firstly, it's presented a summary of the state-of-the-art on software architecture, cloud-based software solutions, scalability and containerization of services. Secondly, some concepts regarding DevOps' origins and it's influence in today's software development paradigm are presented as well as what \gls{kpi} are regarded as important for DevOps. Thirdly, Observability is studied and presented, exploring how it can improve software development in general and how it enables the developers and maintainers to gain insight into the system internal state. Additionally, some text regarding the general technologies used throughout the work is also analyzed whenever relevant to the topic in question.

\Cref{methodology} is divided into two sections. Firstly, a more detailed explanation of the old architecture and its inherent flaws is presented. These flaws, which end up showcasing the need for a new and improved software architecture, are related to the objectives established in \cref{intro:s:objectives}. In this section, it's explained how the old software architecture is flawed and has problems with scalability, poor DevOps performance and low-to-non-existent Observability. Then, in a second section, the author proposes a new software architecture that attempts to solve the problems aforementioned. In this later section, it's shown how the new architecture works, it's key components and given multiple diagrams that help explain said architecture. For each one of the flaws presented in the section before, it's presented how each aspect of the new architecture solves those flaws and the reasoning behind the choices that lead to this new architecture. The procedures taken, the challenges and decisions made throughout the implementation are shown and contextualized in this section.

\Cref{results-and-discussion} analyzes how the new architecture manages to achieve the objectives set in the introductory chapter of this document. Firstly, a cost-rundown report and simulated costs are shown that prove the cost-effectiveness improvement. Secondly, it shows how, by using the new architecture, the DevOps' \gls{kpi}s have improved. Lastly, an overview of the result of implementing changes to the architecture to increase system observability and how it relates to better error detection and increases the system's behavior awareness.

\Cref{conclusion} discusses the previous results and presents some conclusions from what has been demonstrated on previous chapters.

Furthermore, attached to this document, is an appendix that contains some extra results generated from the monitoring interface used internally to evaluate the new architecture.

% \subsection{Options}
% \label{c1:ss:options}

% The following options are supported:

% \begin{itemize}

% \item
% \texttt{oldLogo}: to use the old logo of University of Aveiro.

% \item
% \texttt{newLogo}: to use the new logo of University of Aveiro (default behavior).

% \item
% \texttt{MAP}: for MAP joint doctoral programmes. The logos from the three universities (Aveiro, Minho, Porto) are used.

% \item
% \texttt{draft}: it prints ``DOCUMENTO PROVISÓRIO'' in the first two front pages.

% \item
% \texttt{draftPT}: same as \texttt{draft}.

% \item
% \texttt{draftEN}: same as \texttt{draft}, but instead it prints ``DRAFT DOCUMENT''.

% \item
% As of May 29, 2021, the department name shall not appear in the cover and the first page (top header).
% A new option, \texttt{NODEPT} (no department), was created to suppress the department name (now this is the default behavior).\\
% However, formerly the department name would appear in the cover and first page, therefore the old options were kept for the sake of preservation.
% Any department name can be shown by using one of the following options: \texttt{DAO}, \texttt{DBIO}, \texttt{DCM}, \texttt{DCSPT}, \texttt{DECA}, \texttt{DECIVIL}, \texttt{DEGEIT}, \texttt{DEM}, \texttt{DEMAC}, \texttt{DEP}, \texttt{DETI}, \texttt{DFIS}, \texttt{DGEO}, \texttt{DLC}, \texttt{DMAT}, \texttt{DQ}.

% \item
% The color of the top bar, in the cover page, is defined by specifying one of the following scientific areas: \texttt{accounting}, \texttt{arts}, \texttt{economy}, \texttt{education}, \texttt{engineering}, \texttt{health}, \texttt{humanities}, \texttt{sciences}.

% \end{itemize}
